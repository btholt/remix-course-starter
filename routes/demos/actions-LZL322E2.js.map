{
  "version": 3,
  "sources": ["browser-route-module:/Users/brianholt/personal/remix-course-starter/app/routes/demos/actions.jsx?browser", "../../../../app/routes/demos/actions.jsx"],
  "sourcesContent": ["export { default, meta } from \"/Users/brianholt/personal/remix-course-starter/app/routes/demos/actions.jsx\";", "import { useEffect, useRef } from \"react\";\nimport { Form, json, useActionData, redirect } from \"remix\";\n\nexport function meta() {\n  return { title: \"Actions Demo\" };\n}\n\n// When your form sends a POST, the action is called on the server.\n// - https://remix.run/api/conventions#action\n// - https://remix.run/guides/data-updates\nexport let action = async ({ request }) => {\n  let formData = await request.formData();\n  let answer = formData.get(\"answer\");\n\n  // Typical action workflows start with validating the form data that just came\n  // over the network. Clientside validation is fine, but you definitely need it\n  // server side.  If there's a problem, return the the data and the component\n  // can render it.\n  if (typeof answer !== \"string\") {\n    return json(\"Come on, at least try!\", { status: 400 });\n  }\n\n  if (answer !== \"egg\") {\n    return json(`Sorry, ${answer} is not right.`, { status: 400 });\n  }\n\n  // Finally, if the data is valid, you'll typically write to a database or send or\n  // email or log the user in, etc. It's recommended to redirect after a\n  // successful action, even if it's to the same place so that non-JavaScript workflows\n  // from the browser doesn't repost the data if the user clicks back.\n  return redirect(\"/demos/correct\");\n};\n\nexport default function ActionsDemo() {\n  // https://remix.run/api/remix#useactiondata\n  let actionMessage = useActionData();\n  let answerRef = useRef(null);\n\n  // This form works without JavaScript, but when we have JavaScript we can make\n  // the experience better by selecting the input on wrong answers! Go ahead, disable\n  // JavaScript in your browser and see what happens.\n  useEffect(() => {\n    if (actionMessage && answerRef.current) {\n      answerRef.current.select();\n    }\n  }, [actionMessage]);\n\n  return (\n    <div className=\"remix__page\">\n      <main>\n        <h2>Actions!</h2>\n        <p>\n          This form submission will send a post request that we handle in our\n          `action` export. Any route can export an action to handle data\n          mutations.\n        </p>\n        <Form method=\"post\" className=\"remix__form\">\n          <h3>Post an Action</h3>\n          <p>\n            <i>What is more useful when it is broken?</i>\n          </p>\n          <label>\n            <div>Answer:</div>\n            <input ref={answerRef} name=\"answer\" type=\"text\" />\n          </label>\n          <div>\n            <button>Answer!</button>\n          </div>\n          {actionMessage ? (\n            <p>\n              <b>{actionMessage}</b>\n            </p>\n          ) : null}\n        </Form>\n      </main>\n\n      <aside>\n        <h3>Additional Resources</h3>\n        <ul>\n          <li>\n            Guide:{\" \"}\n            <a href=\"https://remix.run/guides/data-writes\">Data Writes</a>\n          </li>\n          <li>\n            API:{\" \"}\n            <a href=\"https://remix.run/api/conventions#action\">\n              Route Action Export\n            </a>\n          </li>\n          <li>\n            API:{\" \"}\n            <a href=\"https://remix.run/api/remix#useactiondata\">\n              <code>useActionData</code>\n            </a>\n          </li>\n        </ul>\n      </aside>\n    </div>\n  );\n}\n"],
  "mappings": ";;;;;;;;;;;;AAAA;;;ACAA;AAAA,mBAAkC;AAG3B,gBAAgB;AACrB,SAAO,EAAE,OAAO;AAAA;AA6BH,uBAAuB;AAEpC,MAAI,gBAAgB;AACpB,MAAI,YAAY,yBAAO;AAKvB,8BAAU,MAAM;AACd,QAAI,iBAAiB,UAAU,SAAS;AACtC,gBAAU,QAAQ;AAAA;AAAA,KAEnB,CAAC;AAEJ,SACE,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,QAAD,MACE,oCAAC,MAAD,MAAI,aACJ,oCAAC,KAAD,MAAG,kJAKH,oCAAC,MAAD;AAAA,IAAM,QAAO;AAAA,IAAO,WAAU;AAAA,KAC5B,oCAAC,MAAD,MAAI,mBACJ,oCAAC,KAAD,MACE,oCAAC,KAAD,MAAG,4CAEL,oCAAC,SAAD,MACE,oCAAC,OAAD,MAAK,YACL,oCAAC,SAAD;AAAA,IAAO,KAAK;AAAA,IAAW,MAAK;AAAA,IAAS,MAAK;AAAA,OAE5C,oCAAC,OAAD,MACE,oCAAC,UAAD,MAAQ,aAET,gBACC,oCAAC,KAAD,MACE,oCAAC,KAAD,MAAI,kBAEJ,QAIR,oCAAC,SAAD,MACE,oCAAC,MAAD,MAAI,yBACJ,oCAAC,MAAD,MACE,oCAAC,MAAD,MAAI,UACK,KACP,oCAAC,KAAD;AAAA,IAAG,MAAK;AAAA,KAAuC,iBAEjD,oCAAC,MAAD,MAAI,QACG,KACL,oCAAC,KAAD;AAAA,IAAG,MAAK;AAAA,KAA2C,yBAIrD,oCAAC,MAAD,MAAI,QACG,KACL,oCAAC,KAAD;AAAA,IAAG,MAAK;AAAA,KACN,oCAAC,QAAD,MAAM;AAAA;",
  "names": []
}
